<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Getting started with sendeR • sendeR</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Getting started with sendeR">
<meta property="og:description" content="">
<meta property="og:image" content="/logo.png">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">sendeR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.7.2.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="..//index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/quickstart.html">Intro</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/tmakowski/sendeR">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Getting started with sendeR</h1>
            
            <h4 class="date">2019-11-13</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/tmakowski/sendeR/blob/master/vignettes/quickstart.Rmd"><code>vignettes/quickstart.Rmd</code></a></small>
      <div class="hidden name"><code>quickstart.Rmd</code></div>

    </div>

    
    
<div id="introduction" class="section level2">
<h2 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h2>
<p>This document contains a description for every service implemented in the <code>sendeR</code> package on how to start sending messages with it. Each chapter contains information about acquiring either an API webhook, a token or some other form of credentials required for sending messages via the API.</p>
<p>Other than the API access acquisition usage of each client is very straightforward. With the acquired form of authorization we create a client for the service. Once the service client is created the <code>send_message</code> has three basic parameters:</p>
<ul>
<li>
<code>client</code> - the created client,</li>
<li>
<code>message</code> - a text message to be sent,</li>
<li>
<code>destination</code> - a chat id.</li>
</ul>
<p>Additionally, a client specific arguments can be passed through the ellipsis. Those arguments are also covered below.</p>
</div>
<div id="gmail" class="section level2">
<h2 class="hasAnchor">
<a href="#gmail" class="anchor"></a>Gmail</h2>
<div id="credentials-acquisition" class="section level3">
<h3 class="hasAnchor">
<a href="#credentials-acquisition" class="anchor"></a>Credentials acquisition</h3>
<p>First visit Google API web interface: <a href="https://console.developers.google.com/apis/credentials" class="uri">https://console.developers.google.com/apis/credentials</a></p>
<p>Click Select a project, then NEW PROJECT, and enter a name for the project, and optionally, edit the provided project ID. Click Create.</p>
<div class="figure">
<img src="figures/gmail_fig01.png">
</div>
<p>On the Credentials page, select Create credentials, then OAuth client ID.</p>
<div class="figure">
<img src="figures/gmail_fig02.png">
</div>
<p>You may be prompted to set a product name on the Consent screen; if so, click Configure consent screen, supply the requested information, and click Save to return to the Credentials screen.</p>
<p>Select Other for the Application type, and enter any additional information required.</p>
<p>Click Create.</p>
<p>On the page that appears, copy the client ID and client secret to your clipboard, as you will need them when you configure your client library.</p>
</div>
<div id="destination-argument-details" class="section level3">
<h3 class="hasAnchor">
<a href="#destination-argument-details" class="anchor"></a>Destination argument details</h3>
<p>Destination for <code>client_gmail</code> simply is a recipient’s email. It does not have be your own email!</p>
</div>
<div id="additional-send_message-arguments" class="section level3">
<h3 class="hasAnchor">
<a href="#additional-send_message-arguments" class="anchor"></a>Additional <code>send_message</code> arguments</h3>
<p><code>send_message.client_gmail</code> has one additional argument:</p>
<ul>
<li>
<code>subject</code> - a subject of the email message to be sent.</li>
</ul>
</div>
</div>
<div id="slack" class="section level2">
<h2 class="hasAnchor">
<a href="#slack" class="anchor"></a>Slack</h2>
<div id="credentials-acquisition-1" class="section level3">
<h3 class="hasAnchor">
<a href="#credentials-acquisition-1" class="anchor"></a>Credentials acquisition</h3>
<p>Create a Slack app here: <a href="https://api.slack.com/apps?new_app=1" class="uri">https://api.slack.com/apps?new_app=1</a></p>
<div class="figure">
<img src="figures/slack_fig01.png">
</div>
<p>Enable Incoming Webhooks from the settings page.</p>
<div class="figure">
<img src="figures/slack_fig02.png">
</div>
<p>After the settings page refreshes, click Add New Webhook to Workspace. Pick a channel that the app will post to, then click Authorize.</p>
<div class="figure">
<img src="figures/slack_fig03.png">
</div>
<p>Use your Incoming Webhook URL to post a message to Slack.</p>
</div>
<div id="destination-argument-details-1" class="section level3">
<h3 class="hasAnchor">
<a href="#destination-argument-details-1" class="anchor"></a>Destination argument details</h3>
<p>For <code>client_slack</code> this argument is not used because the created webhook is tied to a specific channel what renders <code>destination</code> parameter redundant. However the argument has to be present for implementing the main <code>send_message</code> method.</p>
</div>
<div id="additional-send_message-arguments-1" class="section level3">
<h3 class="hasAnchor">
<a href="#additional-send_message-arguments-1" class="anchor"></a>Additional <code>send_message</code> arguments</h3>
<p><code>send_message.client_slack</code> has no additional parameters as of now.</p>
</div>
</div>
<div id="telegram" class="section level2">
<h2 class="hasAnchor">
<a href="#telegram" class="anchor"></a>Telegram</h2>
<div id="credentials-acquisition-2" class="section level3">
<h3 class="hasAnchor">
<a href="#credentials-acquisition-2" class="anchor"></a>Credentials acquisition</h3>
<p>Creating a Telegram bot is really simply (simpler than guessing your chat id I would say!). To create the bow simply find the <code>@BotFather</code> - chat with it should look similarly to this:</p>
<div class="figure">
<img src="figures/telegram_fig01.png">
</div>
<p>Once the chat is started BotFather will send a message with available commands. The one which interests us is <code>/newbot</code>. After sending the command we will be prompted to enter our bot display name.</p>
<div class="figure">
<img src="figures/telegram_fig02.png">
</div>
<p>Once the display name is provided we will be asked for bot’s username, that is, the name which we can <span class="citation">@tag</span> the bot or search for it in the Telegram.</p>
<div class="figure">
<img src="figures/telegram_fig03.png">
</div>
<p>Once that is done BotFather will send the message with our bot’s API token. This token is passed to the <code>client_telegram</code> function of <code>sendeR</code> package.</p>
</div>
<div id="destination-argument-details-2" class="section level3">
<h3 class="hasAnchor">
<a href="#destination-argument-details-2" class="anchor"></a>Destination argument details</h3>
<p>For Telegram client the <code>destination</code> argument is a chat_id where the message is supposed to be sent. Before sending messages we have to determine what is the chat id we want to use.</p>
<div id="one-on-one-chats" class="section level4">
<h4 class="hasAnchor">
<a href="#one-on-one-chats" class="anchor"></a>One on one chats</h4>
<p>If we want to send messages to the one on one chat with bot. To do that open the chat with bot and initialize the chat by pressing <code>/start</code> as shown below.</p>
<p><img src="figures/telegram_fig04.png" width="45%"><img src="figures/telegram_fig05.png" width="45%"></p>
<p>Now we will use the bot to read our chat id. In order to do so head to <code>https://api.telegram.org/bot&lt;your-bot-token&gt;/getupdates</code>. Page should display a JSON response with no updates received by the bot:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">{
    <span class="st">"ok"</span>:<span class="st"> </span>true,
    <span class="st">"result"</span>:<span class="st"> </span>[]
}</code></pre></div>
<p>Sending an example message “Hello!” to the bot and refreshing the page should result in response containing information similar to the one below (among other parameters).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">{
    <span class="st">"ok"</span>:<span class="st"> </span>true,
    <span class="st">"result"</span>:<span class="st"> </span>[
        {
            <span class="st">"update_id"</span>:<span class="st"> </span><span class="dv">164384282</span>,
            <span class="st">"message"</span>:<span class="st"> </span>{
                <span class="st">"message_id"</span>:<span class="st"> </span><span class="dv">2</span>,
                <span class="st">"from"</span>:<span class="st"> </span>{
                    <span class="st">"id"</span>:<span class="st"> </span>your_user_id
                },
                <span class="st">"chat"</span>:<span class="st"> </span>{
                    <span class="st">"id"</span>:<span class="st"> </span>your_chat_id
                },
                <span class="st">"date"</span>:<span class="st"> </span><span class="dv">1573660088</span>,
                <span class="st">"text"</span>:<span class="st"> "Hello!"</span>
            }
        }
    ]
}</code></pre></div>
<p>Here is the chat id (the <code>destination</code> parameter) we were looking for.</p>
<p>Note that the chat id and the user id are the same that is due to the user id being used as chat id for one on one chats.</p>
</div>
<div id="group-chats" class="section level4">
<h4 class="hasAnchor">
<a href="#group-chats" class="anchor"></a>Group chats</h4>
<p>Similarly to the one on one chats we have to retrieve the information from <code>https://api.telegram.org/bot&lt;your-bot-token&gt;/getupdates</code> page.</p>
<p>To get group’s chat id we need to add our bot to the group. Once the bot is added to the group an update containing following information should appear if we refresh the above page:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">{
    <span class="st">"ok"</span>:<span class="st"> </span>true,
    <span class="st">"result"</span>:<span class="st"> </span>[
        {
            <span class="st">"update_id"</span>:<span class="st"> </span><span class="dv">164384283</span>,
            <span class="st">"message"</span>:<span class="st"> </span>{
                <span class="st">"message_id"</span>:<span class="st"> </span><span class="dv">3</span>,
                <span class="st">"from"</span>:<span class="st"> </span>{
                    <span class="st">"id"</span>:<span class="st"> </span>your_user_id,
                },
                <span class="st">"chat"</span>:<span class="st"> </span>{
                    <span class="st">"id"</span>:<span class="st"> </span>your_group_id,
                    <span class="st">"type"</span>:<span class="st"> "group"</span>
                },
                <span class="st">"date"</span>:<span class="st"> </span><span class="dv">1573661039</span>,
                <span class="st">"group_chat_created"</span>:<span class="st"> </span>true
            }
        }
    ]
}</code></pre></div>
<p>From the response we can extract the group id (note: group ids are negative numbers).</p>
</div>
</div>
<div id="additional-send_message-arguments-2" class="section level3">
<h3 class="hasAnchor">
<a href="#additional-send_message-arguments-2" class="anchor"></a>Additional <code>send_message</code> arguments</h3>
<p><code>send_message.client_telegram</code> has no additional parameters as of now.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#introduction">Introduction</a></li>
      <li><a href="#gmail">Gmail</a></li>
      <li><a href="#slack">Slack</a></li>
      <li><a href="#telegram">Telegram</a></li>
      </ul>
</div>
      </div>

</div>



      <footer><div class="copyright">
  <p>Developed by Tymoteusz Makowski, Tomasz Klonecki.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
